(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,n,t){e.exports=t(45)},45:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(20),i=t.n(r),c=t(7),s=t.n(c),l=t(15),u=t(8),p=t(9),d=t(11),h=t(10),m=t(12),f=t(5),w=t(6);function v(){var e=Object(f.a)(["\n  display: grid;\n  grid-template-columns: ",'px auto;\n  grid-template-areas: "sidebar main";\n']);return v=function(){return e},e}var b=w.a.div(v(),function(e){return e.sideBarWidth||480});function k(){var e=Object(f.a)(["\n  grid-area: sidebar;\n  height: 100vh;\n  overflow-y: scroll;\n  padding: 10px;\n"]);return k=function(){return e},e}var g=w.a.span(k());function x(){var e=Object(f.a)(["\n  grid-area: main;\n  height: 100vh;\n"]);return x=function(){return e},e}var O=w.a.span(x()),y=function(e){return o.a.createElement(b,{className:e.className},o.a.createElement(g,null,e.renderSideBar),o.a.createElement(O,null,e.renderMainContent))},A=t(14),j=t(32),E=function(){var e=Object(l.a)(s.a.mark(function e(n,t){var a,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.citybik.es").concat(n));case 2:return a=e.sent,e.next=5,a.json();case 5:return o=e.sent,r=o&&o[t],e.abrupt("return",r||[]);case 9:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(s.a.mark(function e(){var n,t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/v2/networks","networks");case 2:return n=e.sent,(t=n.map(function(e){return N(e)})).sort(function(e,n){return e.name-n.name}),console.log({networks:t}),e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(s.a.mark(function e(n){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(n,"network");case 2:return t=e.sent,e.abrupt("return",N(t));case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),N=function(e){var n=e.location,t=Object(j.a)(e,["location"]);return Object(A.a)({},t,n,{search:"".concat(t.name," ").concat(n.city," ").concat(n.country)})},I=t(17),B={network:"network",networks:"networks",none:"none"},F="#093",_="#FFB43F",V="#E33033",D={enter:13,upArrow:38,downArrow:40},z={viewport:{latitude:30.785164,longitude:0,zoom:1,bearing:0,pitch:0},style:"mapbox://styles/mapbox/light-v9",layers:[],mode:B.networks,network:null},H=function(e){return e>=6?F:e>0?_:V},J={cursor:"pointer",fill:"#346F8F",stroke:"grey"},M=function(e){function n(){return Object(u.a)(this,n),Object(d.a)(this,Object(h.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this.props,n=e.size,t=void 0===n?20:n,a=e.onClick,r=e.data,i=e.mode===B.networks?J.fill:H(r.free_bikes),c=Object(A.a)({},J,{fill:i});return o.a.createElement("svg",{height:t,viewBox:"0 0 24 24",style:Object(A.a)({},c,{transform:"translate(".concat(-t/2,"px,").concat(-t,"px)")}),onClick:a},o.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"}))}}]),n}(a.PureComponent),R=function(e){function n(){return Object(u.a)(this,n),Object(d.a)(this,Object(h.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this.props,n=e.points,t=e.onPinClick,a=e.mode;return n?n.map(function(e,n){return o.a.createElement(I.b,{key:"".concat(n),longitude:e.longitude,latitude:e.latitude},o.a.createElement(M,{size:20,data:e,mode:a,onClick:function(){return t(e)}}))}):null}}]),n}(a.Component),Y=t(31),P=function(e){function n(e){var t;Object(u.a)(this,n),(t=Object(d.a)(this,Object(h.a)(n).call(this,e)))._onViewportChange=function(e){t.setState({viewport:e})},t._transitionToPosition=function(e){var n=Object(A.a)({},e,{transitionDuration:3e3,transitionInterpolator:new I.a,transitionEasing:Y.a});t.setState({viewport:n})},t._onTransitionEnd=function(e){},t._handleClick=function(e){var n=t.props,a=n.mode,o=n.onNetworkSelected;a===B.networks?o(e):console.log("pin clicked")};var a=t.props.networks;return t.initialState=Object(A.a)({},z,{data:a}),t.state=t.initialState,t}return Object(m.a)(n,e),Object(p.a)(n,[{key:"componentDidUpdate",value:function(e,n){if(e.network!==this.props.network){var t=this.props.network,a=t?Object(A.a)({},this.state.viewport,{longitude:t.longitude,latitude:t.latitude,zoom:12}):this.initialState.viewport;this._transitionToPosition(a)}}},{key:"render",value:function(){var e=this.props,n=e.token,t=e.mode,a=e.data,r=this.state,i=r.viewport,c=r.style;return o.a.createElement(I.c,Object.assign({},i,{mapStyle:c,width:"100%",height:"100%",maxPitch:85,onViewportChange:this._onViewportChange,mapboxApiAccessToken:n,onTransitionEnd:this._onTransitionEnd}),t!==B.none?o.a.createElement(R,{points:a,onPinClick:this._handleClick,mode:t}):null)}}]),n}(a.Component);function U(){var e=Object(f.a)(['\n  color: rgb(72, 72, 72);\n  height: 100%;\n  border-width: 1px;\n  border-style: solid;\n  border-color: rgb(235, 235, 235) ;\n  border-image: initial;\n  border-radius: 3px;\n  padding: 4px;\n  margin: 8px;\n\n  .station--name {\n    overflow-wrap: break-word;\n    font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif !important;\n    font-size: 16px;\n    font-weight: 800;\n    line-height: 1.44444em;\n    color: rgb(72, 72, 72);\n    margin: 0px;\n  }\n\n  .station--slots {\n    float: right;\n  }\n']);return U=function(){return e},e}var K=w.a.div(U());function Q(){var e=Object(f.a)(["\n  background-color: ",";\n  border: none;\n  color: white;\n  padding: 2px 4px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  margin: 4px 2px;\n  border-radius: 16px;\n  font-size: 10px;\n"]);return Q=function(){return e},e}var Z=w.a.div(Q(),function(e){return e.color}),L=function(e){var n=e.station;e.className;return o.a.createElement(K,null,o.a.createElement("div",{className:"station--name"},n.name),o.a.createElement(Z,{color:H(n.free_bikes),className:"station--bikes"},n.free_bikes," Available Bikes"),o.a.createElement(Z,{color:H(n.empty_slots),className:"station--slots"},n.empty_slots," Available Slots"))},T=function(e){return e.stations.map(function(e,n){return o.a.createElement("div",{key:n},o.a.createElement(L,{station:e}))})};function X(){var e=Object(f.a)(['\n  font-family: Circular, -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif;\n\n  .sidebar-header {\n    display:flex;\n  }\n\n  .sidebar-header--logo {\n    margin-right: 20px;\n    svg {\n      height: 48px;\n      path {\n        fill: #FF5A5F;\n      }\n    }\n  }\n\n']);return X=function(){return e},e}var q=w.a.div(X());function W(){var e=Object(f.a)(['\n  .autocomplete {\n    width: 100%;\n    text-align: right;\n    position: relative;\n\n    svg {\n      height: 18px;\n      width: 18px;\n      display: block;\n      fill: currentcolor;\n    }\n  }\n  .autocomplete--input {\n    background-color: rgb(255, 255, 255);\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 2px 4px;\n    height: 48px;\n    transition: box-shadow 200ms ease-in 0s;\n    border-width: 1px !important;\n    border-style: solid !important;\n    border-color: rgb(235, 235, 235) !important;\n    border-image: initial !important;\n    border-radius: 4px !important;\n    font-size: 20px;\n    width: 320px;\n    padding-left: 56px;\n  }\n  .autocomplete--input:focus {\n    outline: none;\n    border: 4px solid grey;\n  }\n  .autocomplete--search-icon {\n    height: 100%;\n    width: 24px;\n    margin-top: -10px;\n    position: absolute;\n    top: 50%;\n    left: 20px;\n\n    opacity: 0.6;\n    background-color: transparent;\n    border: 0;\n    background-repeat: no-repeat;\n    background-size: 100%;\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAACnElEQVR4AcXZsUsbYRjH8e+dh2s1SyAGJwMJuDj1BIcEhJQIOnTq5F+QOf0jIq79A7oFh7aYyVBEkaZDC3awECc1AUXRIqUQotfFocnjJe/dk+b9PKP65Md7z13ee3Uwk2SNHKmngs5TnbDLJQqjA+RYZ4OXuDzvkSYf+cAJ44fPAYFhHeAzVhlqBBGrRoax8KjSJYhRXap4KCVoECiqQQKFLC0CZbXIElOBOwJ9cUchzm2Y5QsveN4tdfY4o00HSDHHPKuUmOV5v/D5SSSJ0MXfIY+HBB55dkIvRIIIvJDR28dnFJ/9kHH0MFaVDehRxlSZnuxAFUMZunKQKBJFUQ4wXTIYqcmPZ5GoFmUEahjw5eJTJI6ivBD4jCS/csrEVZZfU4yQk5OPhrwjcoRygQ0GVdCQf73OUEfisaMkHk1HDJHkYeDX82jlBzo+kCSEyxruwDP/EK1DbsWnhHDFgNTpodWjLgY9NECKfnvoyS4p8wBngN5Z/ABtQK8dP0AH0OuYB5iMqfAAMque7HJtHmAOPdnlxjzAPHqyy5V5gFX0ZJfj8AAn9CvhoeVRol8zPMAuj/xrlhW0Vpg1D3ApflhGR3b4wTlDvI24i4u+w9y0uyVrM213U1qxuy2/Z8bui8m23VezgGW7L6cBLdIWXs9FBAsHFCLCJI9opFMKXEzkkEp/IbK0bEdI0LARQRzVWoigPKy+Z5tlWooIiuP6NhVmAEiPNwLkqHDEw5CGx2wyDQDRI8T7l80U19xwxTFNmpwzKM1nFsyeCw7jFymCAxYjrHDp8r9cUOCUYRZ4Bw6AxVV47QJYXIVXLliNsOSC1Qh/XLAa4ZuDmmIcH1l2AaytwhZfmaAkn/qOb7eYBofJekOJJX7znfccAvwFyB3OeNys7d4AAAAASUVORK5CYII=");\n  }\n\n  .autocomplete--delete-icon {\n    height: 100%;\n    width: 24px;\n    margin-top: -24px;\n    position: absolute;\n    top: 50%;\n    right: 20px;\n    opacity: 0.6;\n    background-color: transparent;\n    border: 0;\n    cursor: pointer;\n\n    svg {\n      height: 12px;\n      width: 12px;\n      display: block;\n      fill: currentcolor;\n    }\n  }\n\n  ul.options {\n    display: block;\n    list-style: none;\n    width: 360px;\n    transition: width 0.3s;\n    margin: auto;\n    position: relative;\n    max-height: 368px;\n    overflow-y: scroll;\n  }\n\n  ul.options li {\n    display: block;\n    background: white;\n    margin: 10px auto;\n    padding: 10px;\n    font-size: 1.2rem;\n    width: 100%;\n    border-radius: 2px;\n    margin-left: -40px;\n  }\n  ul.options li:hover, ul.options li.option-active {\n    cursor: pointer;\n    transition: 0.3s all;\n    background: whitesmoke;\n  }\n\n  ul.options li.option-active {\n    background: whitesmoke;\n  }\n']);return W=function(){return e},e}var G=w.a.div(W()),$=function(e){function n(e){var t;Object(u.a)(this,n),(t=Object(d.a)(this,Object(h.a)(n).call(this,e)))._onChange=function(e){var n=t.props,a=n.options,o=n.searchField,r=e.currentTarget.value,i=a.filter(function(e){return e[o].toLowerCase().indexOf(r.toLowerCase())>-1});t.setState({activeIndex:0,filteredOptions:i,showOptions:!0,inputValue:r})},t._onClick=function(e){var n=t.state.filteredOptions[t.state.activeIndex];t._onSelect(n),t.setState({activeIndex:0,selectedOption:n,filteredOptions:[],showOptions:!1,inputValue:e.currentTarget.innerText})},t._onSelect=function(e){(0,t.props.onSelect)(e)},t._onClearSelectedOption=function(){t._onSelect(null),t.setState({activeIndex:0,selectedOption:null,filteredOptions:[],showOptions:!1,inputValue:""})},t._onKeyDown=function(e){var n=t.state,a=n.activeIndex,o=n.filteredOptions;if(e.keyCode===D.enter){var r=o[a];t._onSelect(r),t.setState({activeIndex:0,selectedOption:r,showOptions:!1,inputValue:o[a].name})}else if(e.keyCode===D.upArrow){if(0===a)return;t.setState({activeIndex:a-1})}else if(e.keyCode===D.downArrow){if(a===o.length-1)return void console.log(a);t.setState({activeIndex:a+1})}};var a=e.selectedOption;return t.state={activeIndex:0,selectedOption:a,filteredOptions:[],showOptions:!1,inputValue:a?a.name:""},t}return Object(m.a)(n,e),Object(p.a)(n,[{key:"componentDidUpdate",value:function(e,n){if(e.selectedOption!==this.props.selectedOption){var t=this.props.selectedOption;this.setState({selectedOption:t,inputValue:t?t.name:""})}}},{key:"render",value:function(){var e,n=this._onChange,t=this._onClick,a=this._onKeyDown,r=this.state,i=r.activeIndex,c=r.filteredOptions,s=r.showOptions,l=r.inputValue,u=r.selectedOption,p=this.props.displayField;return s&&l&&(e=o.a.createElement("ul",{className:"options"},c.map(function(e,n){var a;return n===i&&(a="option-active"),o.a.createElement("li",{className:a,key:n,onClick:t},e[p])}))),o.a.createElement(G,null,o.a.createElement("div",{className:"autocomplete"},o.a.createElement("input",{type:"text",className:"autocomplete--input",onChange:n,onKeyDown:a,value:l,disabled:!!u}),o.a.createElement("div",{className:"autocomplete--search-icon"}),u?o.a.createElement("button",{className:"autocomplete--delete-icon",type:"button",onClick:this._onClearSelectedOption},o.a.createElement("svg",{viewBox:"0 0 24 24",focusable:"false"},o.a.createElement("path",{d:"m23.25 24c-.19 0-.38-.07-.53-.22l-10.72-10.72-10.72 10.72c-.29.29-.77.29-1.06 0s-.29-.77 0-1.06l10.72-10.72-10.72-10.72c-.29-.29-.29-.77 0-1.06s.77-.29 1.06 0l10.72 10.72 10.72-10.72c.29-.29.77-.29 1.06 0s .29.77 0 1.06l-10.72 10.72 10.72 10.72c.29.29.29.77 0 1.06-.15.15-.34.22-.53.22",fillRule:"evenodd"}))):null),e)}}]),n}(a.Component),ee=function(e){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=Object(d.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(o)))).state={networks:null,mode:B.networks,data:null},t._fetchBikeNetworks=Object(l.a)(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:n=e.sent,console.log(n),t.setState({networks:n,data:n});case 5:case"end":return e.stop()}},e)})),t._fetchBikeNetwork=function(){var e=Object(l.a)(s.a.mark(function e(n){var a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n.href);case 2:a=e.sent,o=B.network,t.setState({network:a,mode:o,data:a.stations});case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t._onNetworkSelect=function(e){if(console.log({network:e,action:"onNetworkSelect"}),e)t._fetchBikeNetwork(e);else{var n=B.networks;t.setState({network:null,mode:n,data:t.state.networks})}},t}return Object(m.a)(n,e),Object(p.a)(n,[{key:"componentDidMount",value:function(){this._fetchBikeNetworks()}},{key:"render",value:function(){var e=this.state,n=e.networks,t=e.mode,a=e.network,r=e.data;return n?o.a.createElement(q,null,o.a.createElement(y,{renderSideBar:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"sidebar-header"},o.a.createElement("div",{className:"sidebar-header--logo"},o.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"bicycle",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},o.a.createElement("path",{fill:"currentColor",d:"M512.509 192.001c-16.373-.064-32.03 2.955-46.436 8.495l-77.68-125.153A24 24 0 0 0 368.001 64h-64c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h50.649l14.896 24H256.002v-16c0-8.837-7.163-16-16-16h-87.459c-13.441 0-24.777 10.999-24.536 24.437.232 13.044 10.876 23.563 23.995 23.563h48.726l-29.417 47.52c-13.433-4.83-27.904-7.483-42.992-7.52C58.094 191.83.412 249.012.002 319.236-.413 390.279 57.055 448 128.002 448c59.642 0 109.758-40.793 123.967-96h52.033a24 24 0 0 0 20.406-11.367L410.37 201.77l14.938 24.067c-25.455 23.448-41.385 57.081-41.307 94.437.145 68.833 57.899 127.051 126.729 127.719 70.606.685 128.181-55.803 129.255-125.996 1.086-70.941-56.526-129.72-127.476-129.996zM186.75 265.772c9.727 10.529 16.673 23.661 19.642 38.228h-43.306l23.664-38.228zM128.002 400c-44.112 0-80-35.888-80-80s35.888-80 80-80c5.869 0 11.586.653 17.099 1.859l-45.505 73.509C89.715 331.327 101.213 352 120.002 352h81.3c-12.37 28.225-40.562 48-73.3 48zm162.63-96h-35.624c-3.96-31.756-19.556-59.894-42.383-80.026L237.371 184h127.547l-74.286 120zm217.057 95.886c-41.036-2.165-74.049-35.692-75.627-76.755-.812-21.121 6.633-40.518 19.335-55.263l44.433 71.586c4.66 7.508 14.524 9.816 22.032 5.156l13.594-8.437c7.508-4.66 9.817-14.524 5.156-22.032l-44.468-71.643a79.901 79.901 0 0 1 19.858-2.497c44.112 0 80 35.888 80 80-.001 45.54-38.252 82.316-84.313 79.885z"}))),o.a.createElement($,{className:"sidebar-header--search",options:n,selectedOption:a,searchField:"search",displayField:"search",onSelect:this._onNetworkSelect})),a?o.a.createElement(T,{stations:a.stations}):null),renderMainContent:o.a.createElement(P,{token:"pk.eyJ1Ijoiam11cnJldHhhY3RseSIsImEiOiJjanNkMnZxOHcwMTEwNDNxZzM5bG1hMHZ2In0.fXNRPQsfUYANL2FaL5qZYw",data:r,mode:t,network:a,onNetworkSelected:this._onNetworkSelect})})):null}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.06bffe90.chunk.js.map